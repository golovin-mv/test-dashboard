(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,t,n){"use strict";n.r(t);var a,r=n(0),u=n.n(r),i=n(42),c=n.n(i),o=(n(56),n(43)),l=n(44),f=n(50),s=n(49),m=n(12),d=n(1),v=n(45),g=n.n(v),b=[],h={entities:{},userSetting:{tableUpdateDelay:3e3,entityUpdateDelay:3e3,paramsAggregators:Array(20).fill("sum")}},p=function(){return h},j=function(e){h=Object.assign({},h,e),b.forEach((function(e){return e()}))},O=function(e){return b.push(e)},y=g()("http://localhost:3000"),E=(a=y,function(){return a.emit("entities")}),S=function(e){return function(t){return e.emit("entity",{id:t})}}(y),k=function(e,t,n){return function(){e.on("reseive-entities",(function(e){return n({entities:e})})),e.on("reseive-entity",(function(e){return e&&n({entities:Object(d.a)(Object(d.a)({},t().entities),{},Object(m.a)({},e.id,e))})}))}}(y,p,j),w=n(13),U=n.n(w),D=n(5),x=n(6),C=n(7),A=n(8),M=n(9);function I(){var e=Object(A.a)(["\n  width: 100%;\n  padding: 0.4em;\n"]);return I=function(){return e},e}function F(){var e=Object(A.a)(["\n  width: 100%;\n  text-align: center;\n"]);return F=function(){return e},e}function T(){var e=Object(A.a)(["\n  background-color: ",";\n  color: ",";\n  mix-blend-mode: difference;\n  padding: 0.4em;\n"]);return T=function(){return e},e}function B(){var e=Object(A.a)(["\n  background-color: #c4c4c4;\n  color: #000;\n  padding: 0.4em;\n"]);return B=function(){return e},e}var J=[{label:"sum",value:"sum"},{label:"min",value:"min"},{label:"max",value:"max"},{label:"avg",value:"avg"}],L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,t){return e+t}))},W={sum:L,min:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Math.min.apply(Math,Object(D.a)(e))},max:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Math.max.apply(Math,Object(D.a)(e))},avg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return L(e)/e.length}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e[0]?e[0].map((function(t,n){return e.map((function(e){return e[n]}))})):[]},P=M.a.td(B()),R=M.a.td(T(),(function(e){return 0===(t=parseFloat(e.children))?"rgb(255, 255, 255)":t<0?"rgba(255, 140, 0, ".concat(Math.abs(t),")"):"rgba(0, 0, 0, ".concat(Math.abs(t),")");var t}),(function(e){return parseFloat(e.children)>.5?"#fff":"#000"})),$=M.a.table(F()),q=M.a.select(I()),z=function(e){var t,n,a=e.entities,r=e.onIntervalChange,i=e.onAgregationChange,c=e.userSetting,o=c.tableUpdateDelay,l=c.paramsAggregators,f=function(e){var t=e.id,n=Object(C.a)(e,["id"]);return u.a.createElement("tr",{key:t},u.a.createElement(P,null,u.a.createElement(w.Link,{href:"/entity/?id=".concat(t)},t)),function(e){return Object.values(e).map((function(e){return u.a.createElement(R,{key:e},e.toFixed(4))}))}(n))};return u.a.createElement("div",null,u.a.createElement("div",null,u.a.createElement("span",null,"\u0418\u043d\u0442\u0435\u0440\u0432\u0430\u043b \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f ms: "),u.a.createElement("input",{min:"100",value:o,type:"number",onChange:function(e){return r(e.target.value)}})),u.a.createElement($,null,u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",{key:"idth"}),(n=l,Object.values(n).map((function(e,t){return u.a.createElement("th",{key:e+t},u.a.createElement(q,{onChange:function(e){return i(t,e.target.value)},value:n[t]},J.map((function(e){return u.a.createElement("option",{value:e.value,key:e.value+t},e.label)}))))}))))),u.a.createElement("tbody",null,(t=a,Object.values(t).map((function(e){return f(e)}))),u.a.createElement("tr",null,u.a.createElement("td",null,"\u0418\u0422\u041e\u0413\u041e:"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return N(Object.values(e).map((function(e){e.id;var t=Object(C.a)(e,["id"]);return Object.values(t)}))).reduce((function(e,t,n){return e.push(W[l[n]](t)),e}),[]).map((function(e){return u.a.createElement("td",{key:e},e.toFixed(4))}))}(a)))))},G=null,H=function(e){var t=Object(r.useState)(p()),n=Object(x.a)(t,2),a=n[0],i=n[1];Object(r.useEffect)((function(){O((function(){return i(p())}))})),Object(r.useEffect)((function(){return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return G=setTimeout((function(){E(),e(p().userSetting.tableUpdateDelay)}),t)}(),function(){return clearTimeout(G)}}),[]);return u.a.createElement(z,Object.assign({onAgregationChange:function(e,t){return j({userSetting:Object(d.a)(Object(d.a)({},p().userSetting),{},{paramsAggregators:function(){var n=Object(D.a)(p().userSetting.paramsAggregators);return n[e]=t,n}()})})},onIntervalChange:function(e){return e>100&&j({userSetting:Object(d.a)(Object(d.a)({},p().userSetting),{},{tableUpdateDelay:e})})}},e,a))},K=function(e){var t=e.entity,n=e.onIntervalChange,a=e.entityUpdateDelay;return u.a.createElement("div",null,u.a.createElement("div",null,u.a.createElement("span",null,"\u0418\u043d\u0442\u0435\u0440\u0432\u0430\u043b \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f ms: "),u.a.createElement("input",{min:"100",value:a,type:"number",onChange:function(e){return n(e.target.value)}})),t&&u.a.createElement("div",null,u.a.createElement("h1",null,t.id),function(e){e.id;var t=Object(C.a)(e,["id"]);return Object.keys(t).map((function(e){return u.a.createElement("div",null,e,": ",t[e])}))}(t)))},Q=null,V=function(e){var t=new URL(window.location.href).searchParams.get("id"),n=Object(r.useState)(p().entities[t]),a=Object(x.a)(n,2),i=a[0],c=a[1],o=Object(r.useState)(p()),l=Object(x.a)(o,2),f=l[0],s=l[1];Object(r.useEffect)((function(){O((function(){c(p().entities[t]),s(p())}))})),Object(r.useEffect)((function(){return function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Q=setTimeout((function(){S(t),e(t,p().userSetting.entityUpdateDelay)}),n)}(t),function(){return clearTimeout(Q)}}),[]);return u.a.createElement(K,Object.assign({onIntervalChange:function(e){return e>100&&j({userSetting:Object(d.a)(Object(d.a)({},p().userSetting),{},{entityUpdateDelay:e})})},entity:i,entityUpdateDelay:f.userSetting.entityUpdateDelay},e))};k();var X=function(){return u.a.createElement("h1",null,"404! Not found")},Y=function(e){Object(f.a)(n,e);var t=Object(s.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"routes",value:function(e){e("/",H),e("/entity",V),e("/:path*",X)}}]),n}(U.a);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(u.a.createElement(u.a.StrictMode,null,u.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},51:function(e,t,n){e.exports=n(101)},56:function(e,t,n){},87:function(e,t){}},[[51,1,2]]]);
//# sourceMappingURL=main.b3063dee.chunk.js.map